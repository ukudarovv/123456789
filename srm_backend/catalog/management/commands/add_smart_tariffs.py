from django.core.management.base import BaseCommand
from catalog.models import School, SchoolTariff
from dictionaries.models import TariffPlan, TrainingFormat


class Command(BaseCommand):
    help = '–î–æ–±–∞–≤–ª—è–µ—Ç —Ç–∞—Ä–∏—Ñ—ã START –∏ PRO –¥–ª—è Smart –ê–≤—Ç–æ—à–∫–æ–ª—ã'

    def handle(self, *args, **options):
        # –ù–∞—Ö–æ–¥–∏–º —à–∫–æ–ª—É Smart –ê–≤—Ç–æ—à–∫–æ–ª–∞
        try:
            school = School.objects.get(name_ru="Smart –ê–≤—Ç–æ—à–∫–æ–ª–∞")
            self.stdout.write(self.style.SUCCESS(f'–ù–∞–π–¥–µ–Ω–∞ —à–∫–æ–ª–∞: {school.name_ru}'))
        except School.DoesNotExist:
            self.stdout.write(self.style.ERROR('–®–∫–æ–ª–∞ Smart –ê–≤—Ç–æ—à–∫–æ–ª–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞'))
            return

        # –ù–∞—Ö–æ–¥–∏–º —Ñ–æ—Ä–º–∞—Ç –æ–±—É—á–µ–Ω–∏—è "–û–Ω–ª–∞–π–Ω"
        try:
            online_format = TrainingFormat.objects.get(name_ru="–û–Ω–ª–∞–π–Ω")
            self.stdout.write(self.style.SUCCESS(f'–ù–∞–π–¥–µ–Ω —Ñ–æ—Ä–º–∞—Ç: {online_format.name_ru}'))
        except TrainingFormat.DoesNotExist:
            self.stdout.write(self.style.ERROR('–§–æ—Ä–º–∞—Ç –æ–±—É—á–µ–Ω–∏—è "–û–Ω–ª–∞–π–Ω" –Ω–µ –Ω–∞–π–¥–µ–Ω'))
            return

        # –°–æ–∑–¥–∞–µ–º –∏–ª–∏ –ø–æ–ª—É—á–∞–µ–º —Ç–∞—Ä–∏—Ñ–Ω—ã–µ –ø–ª–∞–Ω—ã START –∏ PRO
        start_plan, created = TariffPlan.objects.get_or_create(
            code="START",
            defaults={
                "name_ru": "START",
                "name_kz": "START",
                "sort_order": 4,
                "is_active": True
            }
        )
        if created:
            self.stdout.write(self.style.SUCCESS(f'–°–æ–∑–¥–∞–Ω —Ç–∞—Ä–∏—Ñ–Ω—ã–π –ø–ª–∞–Ω: {start_plan.code}'))
        else:
            self.stdout.write(f'–¢–∞—Ä–∏—Ñ–Ω—ã–π –ø–ª–∞–Ω —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: {start_plan.code}')

        pro_plan, created = TariffPlan.objects.get_or_create(
            code="PRO",
            defaults={
                "name_ru": "PRO",
                "name_kz": "PRO",
                "sort_order": 5,
                "is_active": True
            }
        )
        if created:
            self.stdout.write(self.style.SUCCESS(f'–°–æ–∑–¥–∞–Ω —Ç–∞—Ä–∏—Ñ–Ω—ã–π –ø–ª–∞–Ω: {pro_plan.code}'))
        else:
            self.stdout.write(f'–¢–∞—Ä–∏—Ñ–Ω—ã–π –ø–ª–∞–Ω —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: {pro_plan.code}')

        # –°–æ–∑–¥–∞–µ–º —Ç–∞—Ä–∏—Ñ START
        start_tariff, created = SchoolTariff.objects.get_or_create(
            school=school,
            tariff_plan=start_plan,
            training_format=online_format,
            defaults={
                "price_kzt": 7000,
                "currency": "KZT",
                "description_ru": """‚Ä¢ –í–∏–¥–µ–æ—Ä–∞–∑–±–æ—Ä—ã –æ—Ç –ú–∏—Ä—ã
(–∞–≤—Ç–æ—Ä—Å–∫–∞—è –º–µ—Ç–æ–¥–∏–∫–∞: –ø–æ–Ω—è—Ç–Ω—ã–µ –∏ —É–¥–æ–±–Ω—ã–µ –≤–∏–¥–µ–æ—Ä–∞–∑–±–æ—Ä—ã –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏, –ø–æ–≤—ã—à–∞—é—â–∏–µ —à–∞–Ω—Å —Å–¥–∞—á–∏ —ç–∫–∑–∞–º–µ–Ω–∞ –¥–æ 99%)
‚Ä¢ –î–æ—Å—Ç—É–ø –∫ –ü–î–î-—Ç–µ—Å—Ç–∞–º
‚Ä¢ –î–æ—Å—Ç—É–ø –∫ Telegram-–∫–∞–Ω–∞–ª—É
‚Ä¢ –î–æ—Å—Ç—É–ø –∫ Instagram-–∞–∫–∫–∞—É–Ω—Ç—É

üëâ –î–ª—è —É–≤–µ—Ä–µ–Ω–Ω–æ–≥–æ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏""",
                "description_kz": """‚Ä¢ –ú–∏—Ä–∞–¥–∞–Ω –≤–∏–¥–µ–æ —Ç–∞–ª–¥–∞—É–ª–∞—Ä
(–∞–≤—Ç–æ—Ä–ª—ã“õ ”ô–¥—ñ—Å—Ç–µ–º–µ: –¥–∞–π—ã–Ω–¥–∞–ª—É“ì–∞ –∞—Ä–Ω–∞–ª“ì–∞–Ω —Ç“Ø—Å—ñ–Ω—ñ–∫—Ç—ñ –∂”ô–Ω–µ —ã“£“ì–∞–π–ª—ã –≤–∏–¥–µ–æ —Ç–∞–ª–¥–∞—É–ª–∞—Ä, –µ–º—Ç–∏—Ö–∞–Ω —Ç–∞–ø—Å—ã—Ä—É –º“Ø–º–∫—ñ–Ω–¥—ñ–≥—ñ–Ω 99% –¥–µ–π—ñ–Ω –∞—Ä—Ç—Ç—ã—Ä–∞–¥—ã)
‚Ä¢ –ñ“ö–î —Ç–µ—Å—Ç—Ç–µ—Ä—ñ–Ω–µ “õ–æ–ª –∂–µ—Ç–∫—ñ–∑—É
‚Ä¢ Telegram –∫–∞–Ω–∞–ª—ã–Ω–∞ “õ–æ–ª –∂–µ—Ç–∫—ñ–∑—É
‚Ä¢ Instagram –∞–∫–∫–∞—É–Ω—Ç—ã–Ω–∞ “õ–æ–ª –∂–µ—Ç–∫—ñ–∑—É

üëâ –°–µ–Ω—ñ–º–¥—ñ “õ–∞–π—Ç–∞–ª–∞—É –∂”ô–Ω–µ –¥–∞–π—ã–Ω–¥–∞–ª—É “Ø—à—ñ–Ω""",
                "is_active": True
            }
        )
        if created:
            self.stdout.write(self.style.SUCCESS(f'–°–æ–∑–¥–∞–Ω —Ç–∞—Ä–∏—Ñ START: {start_tariff.price_kzt} KZT'))
        else:
            # –û–±–Ω–æ–≤–ª—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ç–∞—Ä–∏—Ñ
            start_tariff.price_kzt = 7000
            start_tariff.description_ru = """‚Ä¢ –í–∏–¥–µ–æ—Ä–∞–∑–±–æ—Ä—ã –æ—Ç –ú–∏—Ä—ã
(–∞–≤—Ç–æ—Ä—Å–∫–∞—è –º–µ—Ç–æ–¥–∏–∫–∞: –ø–æ–Ω—è—Ç–Ω—ã–µ –∏ —É–¥–æ–±–Ω—ã–µ –≤–∏–¥–µ–æ—Ä–∞–∑–±–æ—Ä—ã –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏, –ø–æ–≤—ã—à–∞—é—â–∏–µ —à–∞–Ω—Å —Å–¥–∞—á–∏ —ç–∫–∑–∞–º–µ–Ω–∞ –¥–æ 99%)
‚Ä¢ –î–æ—Å—Ç—É–ø –∫ –ü–î–î-—Ç–µ—Å—Ç–∞–º
‚Ä¢ –î–æ—Å—Ç—É–ø –∫ Telegram-–∫–∞–Ω–∞–ª—É
‚Ä¢ –î–æ—Å—Ç—É–ø –∫ Instagram-–∞–∫–∫–∞—É–Ω—Ç—É

üëâ –î–ª—è —É–≤–µ—Ä–µ–Ω–Ω–æ–≥–æ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏"""
            start_tariff.description_kz = """‚Ä¢ –ú–∏—Ä–∞–¥–∞–Ω –≤–∏–¥–µ–æ —Ç–∞–ª–¥–∞—É–ª–∞—Ä
(–∞–≤—Ç–æ—Ä–ª—ã“õ ”ô–¥—ñ—Å—Ç–µ–º–µ: –¥–∞–π—ã–Ω–¥–∞–ª—É“ì–∞ –∞—Ä–Ω–∞–ª“ì–∞–Ω —Ç“Ø—Å—ñ–Ω—ñ–∫—Ç—ñ –∂”ô–Ω–µ —ã“£“ì–∞–π–ª—ã –≤–∏–¥–µ–æ —Ç–∞–ª–¥–∞—É–ª–∞—Ä, –µ–º—Ç–∏—Ö–∞–Ω —Ç–∞–ø—Å—ã—Ä—É –º“Ø–º–∫—ñ–Ω–¥—ñ–≥—ñ–Ω 99% –¥–µ–π—ñ–Ω –∞—Ä—Ç—Ç—ã—Ä–∞–¥—ã)
‚Ä¢ –ñ“ö–î —Ç–µ—Å—Ç—Ç–µ—Ä—ñ–Ω–µ “õ–æ–ª –∂–µ—Ç–∫—ñ–∑—É
‚Ä¢ Telegram –∫–∞–Ω–∞–ª—ã–Ω–∞ “õ–æ–ª –∂–µ—Ç–∫—ñ–∑—É
‚Ä¢ Instagram –∞–∫–∫–∞—É–Ω—Ç—ã–Ω–∞ “õ–æ–ª –∂–µ—Ç–∫—ñ–∑—É

üëâ –°–µ–Ω—ñ–º–¥—ñ “õ–∞–π—Ç–∞–ª–∞—É –∂”ô–Ω–µ –¥–∞–π—ã–Ω–¥–∞–ª—É “Ø—à—ñ–Ω"""
            start_tariff.is_active = True
            start_tariff.save()
            self.stdout.write(self.style.SUCCESS(f'–û–±–Ω–æ–≤–ª–µ–Ω —Ç–∞—Ä–∏—Ñ START: {start_tariff.price_kzt} KZT'))

        # –°–æ–∑–¥–∞–µ–º —Ç–∞—Ä–∏—Ñ PRO
        pro_tariff, created = SchoolTariff.objects.get_or_create(
            school=school,
            tariff_plan=pro_plan,
            training_format=online_format,
            defaults={
                "price_kzt": 60000,
                "currency": "KZT",
                "description_ru": """‚Ä¢ –í—Å—ë, —á—Ç–æ –≤—Ö–æ–¥–∏—Ç –≤ —Ç–∞—Ä–∏—Ñ START
‚Ä¢ ‚úÖ 1 –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–µ –∑–∞–Ω—è—Ç–∏–µ –ø–æ –≤–æ–∂–¥–µ–Ω–∏—é
‚Ä¢ –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–≤–µ—Ç—ã (–ª–∏—á–Ω–æ)
‚Ä¢ –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç

üëâ –î–ª—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞ —Ä—É–ª—ë–º –∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã—Ö —à–∞–Ω—Å–æ–≤ —Å–¥–∞—á–∏ —ç–∫–∑–∞–º–µ–Ω–∞ —Å –ø–µ—Ä–≤–æ–≥–æ —Ä–∞–∑–∞""",
                "description_kz": """‚Ä¢ START —Ç–∞—Ä–∏—Ñ—ã–Ω–∞ –∫—ñ—Ä–µ—Ç—ñ–Ω –±–∞—Ä–ª—ã“ì—ã
‚Ä¢ ‚úÖ 1 –∂–µ–∫–µ –∂“Ø—Ä–≥—ñ–∑—É —Å–∞–±–∞“ì—ã
‚Ä¢ –ñ–µ–∫–µ “±—Å—ã–Ω—ã—Å—Ç–∞—Ä –∂”ô–Ω–µ –ø—Ä–∞–∫—Ç–∏–∫–∞–ª—ã“õ –∫–µ“£–µ—Å—Ç–µ—Ä (–∂–µ–∫–µ)
‚Ä¢ –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç

üëâ –ö”©–ª—ñ–∫ –±–∞—Å“õ–∞—Ä—É–¥–∞“ì—ã —Å–µ–Ω—ñ–º–¥—ñ–ª—ñ–∫ –∂”ô–Ω–µ –±—ñ—Ä—ñ–Ω—à—ñ —Ä–µ—Ç—Ç–µ–Ω –µ–º—Ç–∏—Ö–∞–Ω —Ç–∞–ø—Å—ã—Ä—É–¥—ã“£ –º–∞–∫—Å–∏–º–∞–ª–¥—ã –º“Ø–º–∫—ñ–Ω–¥—ñ–≥—ñ “Ø—à—ñ–Ω""",
                "is_active": True
            }
        )
        if created:
            self.stdout.write(self.style.SUCCESS(f'–°–æ–∑–¥–∞–Ω —Ç–∞—Ä–∏—Ñ PRO: {pro_tariff.price_kzt} KZT'))
        else:
            # –û–±–Ω–æ–≤–ª—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ç–∞—Ä–∏—Ñ
            pro_tariff.price_kzt = 60000
            pro_tariff.description_ru = """‚Ä¢ –í—Å—ë, —á—Ç–æ –≤—Ö–æ–¥–∏—Ç –≤ —Ç–∞—Ä–∏—Ñ START
‚Ä¢ ‚úÖ 1 –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–µ –∑–∞–Ω—è—Ç–∏–µ –ø–æ –≤–æ–∂–¥–µ–Ω–∏—é
‚Ä¢ –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–≤–µ—Ç—ã (–ª–∏—á–Ω–æ)
‚Ä¢ –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç

üëâ –î–ª—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞ —Ä—É–ª—ë–º –∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã—Ö —à–∞–Ω—Å–æ–≤ —Å–¥–∞—á–∏ —ç–∫–∑–∞–º–µ–Ω–∞ —Å –ø–µ—Ä–≤–æ–≥–æ —Ä–∞–∑–∞"""
            pro_tariff.description_kz = """‚Ä¢ START —Ç–∞—Ä–∏—Ñ—ã–Ω–∞ –∫—ñ—Ä–µ—Ç—ñ–Ω –±–∞—Ä–ª—ã“ì—ã
‚Ä¢ ‚úÖ 1 –∂–µ–∫–µ –∂“Ø—Ä–≥—ñ–∑—É —Å–∞–±–∞“ì—ã
‚Ä¢ –ñ–µ–∫–µ “±—Å—ã–Ω—ã—Å—Ç–∞—Ä –∂”ô–Ω–µ –ø—Ä–∞–∫—Ç–∏–∫–∞–ª—ã“õ –∫–µ“£–µ—Å—Ç–µ—Ä (–∂–µ–∫–µ)
‚Ä¢ –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç

üëâ –ö”©–ª—ñ–∫ –±–∞—Å“õ–∞—Ä—É–¥–∞“ì—ã —Å–µ–Ω—ñ–º–¥—ñ–ª—ñ–∫ –∂”ô–Ω–µ –±—ñ—Ä—ñ–Ω—à—ñ —Ä–µ—Ç—Ç–µ–Ω –µ–º—Ç–∏—Ö–∞–Ω —Ç–∞–ø—Å—ã—Ä—É–¥—ã“£ –º–∞–∫—Å–∏–º–∞–ª–¥—ã –º“Ø–º–∫—ñ–Ω–¥—ñ–≥—ñ “Ø—à—ñ–Ω"""
            pro_tariff.is_active = True
            pro_tariff.save()
            self.stdout.write(self.style.SUCCESS(f'–û–±–Ω–æ–≤–ª–µ–Ω —Ç–∞—Ä–∏—Ñ PRO: {pro_tariff.price_kzt} KZT'))

        self.stdout.write(self.style.SUCCESS('\n–¢–∞—Ä–∏—Ñ—ã —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω—ã/–æ–±–Ω–æ–≤–ª–µ–Ω—ã!'))

